<%= javascript_tag do %>
  var numbers = new Bloodhound({
    datumTokenizer: Bloodhound.tokenizers.obj.whitespace('organization'),
    queryTokenizer: Bloodhound.tokenizers.whitespace,
    local: <%= collection.map { |org| {organization: org.name} }.to_json.html_safe %>
  });

  // initialize the bloodhound suggestion engine
  numbers.initialize();


  $('.<%= klass %>').typeahead(null, {
    displayKey: 'organization',
    source: numbers.ttAdapter()
  });
<% end %>